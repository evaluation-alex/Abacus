/**
*
*   Abacus
*   A combinatorics library for Node/XPCOM/JS, PHP, Python
*   @version: 0.5.0
*   https://github.com/foo123/Abacus
**/
!function(n,r,t){"use strict";"undefined"!=typeof Components&&"object"==typeof Components.classes&&"object"==typeof Components.classesByID&&Components.utils&&"function"==typeof Components.utils["import"]?(n.$deps=n.$deps||{})&&(n.EXPORTED_SYMBOLS=[r])&&(n[r]=n.$deps[r]=t.call(n)):"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[r]=t.call(n)):"undefined"!=typeof System&&"function"==typeof System.register&&"function"==typeof System["import"]?System.register(r,[],function(e){e(r,t.call(n))}):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(r)?define(r,["module"],function(r){return t.moduleUri=r.uri,t.call(n)}):r in n||(n[r]=t.call(n)||1)&&"function"==typeof define&&define.amd&&define(function(){return n[r]})}(this,"Abacus",function(n){"use strict";function r(){throw new Error("Method not implemented!")}function t(n){if(!arguments.length||null==n)return sn;if(tn(n)){for(var r=0,t=n.toUpperCase().split(","),e=0,i=t.length;i>e;e++)n=t[e],r|=W.call(Y.ORDER,n)?Y.ORDER[n]:0;return r>0?r:sn}return vn&n?n:sn}function e(n,r){if(null==n)return null;if(!n.length)return[];var t,e=n.length,i=new Array(e);if(rn(r))for(t=0;e>t;t++)i[t]=r[t]-1-n[t];else if(0>r)for(t=0;e>t;t++)i[t]=e-1-n[t];else for(r-=1,t=0;e>t;t++)i[t]=r-n[t];return i}function i(n){if(null==n)return null;for(var r=n.length-1,t=new Array(r+1),e=0;r>=e;e++)t[e]=n[r-e];return t}function u(n,r){if(null==r&&(r=0),rn(n)){for(var t=n.length,e=new Array(t),i=0;t>i;i++)e[i]=r-n[i];return e}return n===+n&&r===+r?r-n:Y.Arithmetic.sub(Y.Arithmetic.N(r),n)}function o(n,r,t,e,i){var u,o,l,a=r;if(rn(t)){if(l=t,u=l.length,t=0,e=u-1,i=1,u>0)for(o=t;e>=o;o+=i)a=n(a,l[o])}else if(i=i||1,u=(e-t)/i+1,u>0)if(0>i)for(o=t;o>=e;o+=i)a=n(a,o);else for(o=t;e>=o;o+=i)a=n(a,o);return a}function l(){var n,r,t,e,i,u,o,l,a,f,c=arguments,s=c.length;if(!s)return[];for(a=c[0].length,n=1;s>n;n++)a*=c[n].length;for(f=new Array(a),n=0;a>n;n++){for(l=[],t=n,r=s-1;r>=0;r--)if(e=c[r].length,i=t%e,t=~~(t/e),o=c[r][i],rn(o))for(u=o.length-1;u>=0;u--)l.unshift(o[u]);else l.unshift(o);f[n]=l}return f}function a(n){return o(Y.Arithmetic.mul,Y.Arithmetic.I,n)}function f(n){var r=Y.Arithmetic;return r.shl(r.I,r.N(n))}function c(n,r){var t=Y.Arithmetic;return t.pow(t.N(n),t.N(r))}function s(n,r){var t,e,i,u,l,a=Y.Arithmetic,f=a.O,c=a.I,_=a.N,d=a.add,h=a.sub,m=a.div,v=a.mul;if(null==r)return n=_(n),a.lt(n,0)?f:a.lt(n,2)?c:a.lt(n,4)?a.shl(n,a.sub(n,2)):(l=String(n),null==s.fac[l]&&(s.fac[l]=o(v,c,2,n)),s.fac[l]);if(-1===r)return i=_(n),o(function(n,r){return i===n?n:h(v(n,r),n)},i,n,1,-1);if(-2===r)return l=String(n),null==s.sub[l]&&(s.sub[l]=o(function(r,t){return r[1]=-1===r[2]?h(r[1],r[0]):d(r[1],r[0]),r[2]=-r[2],t>1&&n>=t&&(r[0]=v(r[0],t)),t>n?r[1]:r},[c,f,1],0,n+1)),s.sub[l];if(rn(r)){if(1===r.length)return s(n,r[0]);if(l=String(n)+"@"+r.join(","),null==s.nom[l]){for(t=s(r[0]),u=r.length,i=c,e=1;u>e;e++)i=v(i,s(r[e]));s.nom[l]=m(t,i)}return s.nom[l]}if(+r===r){if(r>n-r&&(r=n-r),0>r||1>n)return f;if(0===r||1===n)return c;if(1===r)return _(n);if(l=String(n)+"@"+String(r),null==s.nom[l]){for(n-=r,i=_(1+n),e=2;r>=e;e++)i=v(i,1+n/e);s.nom[l]=a.round(i)}return s.nom[l]}return f}function _(n,r,t){var e=Y.Arithmetic,i=e.O,u=e.I;if(t===n&&1===r||r===n&&1===t)return u;if(t+r>n+1||n>r*t)return i;var o,l,a=Y.Math,f=e.add,c=a.min(t,n-t-r+2),s=a.max(1,a.ceil((n-t)/(r-1))),d=i;for(o=s;c>=o;o++)l=String(n-t)+","+String(r-1)+","+String(o),null==_.tbl[l]&&(_.tbl[l]=_(n-t,r-1,o)),d=f(d,_.tbl[l]);return d}function d(n,r,t){if(null==r)return null;var t,e,i,u,o=r.length,l=n-o;if(0>=n||0>=l)return t||[];for(t=t||new Array(l),e=0,i=0,u=0;l>u&&n>e;)(i>=o||e!==r[i])&&(t[u++]=e),e++,i++;return t}function h(n,r,t,e,i,u,o,l,a,f){a=!1!==a,l=-1===l?1:0,null==t&&(t=0),null==e&&(e=n.length-1),null==i&&(i=0),null==u&&(u=r.length-1);var c,s=t,_=i,d=e-t+1,h=u-i+1,m=0,v=d+h,p=!a;for(o=o||new Array(v);e>=s&&u>=_;){if(a&&m){if(n[s]===c){s++;continue}if(r[_]===c){_++;continue}}n[s]<r[_]?o[m++]=c=l?r[_++]:n[s++]:n[s]>r[_]?o[m++]=c=l?n[s++]:r[_++]:(o[m++]=c=n[s],p&&(o[m++]=r[_]),s++,_++)}for(;e>=s;)(p||n[s]!==c)&&(o[m++]=c=n[s]),s++;for(;u>=_;)(p||r[_]!==c)&&(o[m++]=c=r[_]),_++;if(!0===f){for(m=0;v>m;m++)n[t+m]=o[m];return n}return m<o.length&&(o.length=m),o}function m(n){var r=n.length;if(1>=r)return n;for(var t,e,i=r,u=1,o=2,l=Y.Math.min,a=new Array(r);i;){for(e=r-u,t=0;e>t;t+=o)h(n,n,t,t+u-1,t+u,l(t+o-1,r-1),a,!1,!1,!0);u<<=1,o<<=1,i>>=1}return n}function v(n,r,t){var e,i,u,o,l,a=Y.Math.rndInt;for(o=!0===t?n.slice():n,l=!0===r?1:0,e=o.length;l<e--;)i=a(0,e-l),u=o[e],o[e]=o[i],o[i]=u;return o}function p(n,r,t,e,i){var u,o,l,a,f,c=Y.Math.rndInt,s=n.length;if(r=Y.Math.min(r,s),e=!0===e,u=new Array(r),!0===t){for(s-=1,l=0;r>l;l++)u[l]=n[c(0,s)];return e&&m(u),u}for(i=!1!==i,i&&(o=new Array(r)),l=0;r>l;l++)a=c(0,--s),f=n[a],n[a]=n[s],n[s]=f,u[l]=f,i&&(o[l]=a);if(i)for(l=r-1;l>=0;l--)a=o[l],f=n[s],n[s]=n[a],n[a]=f,s++;return e&&m(u),u}function g(n){if(null==n)return null;var r,t,e,i=n.length,u=n[0],o=new Array(u);for(r=0;u>r;r++)o[r]=1;for(t=1;i>t;t++)for(r=0,e=n[t];u>r&&e>0;)o[r++]++,e--;return o}function A(n){var r,t=[],e=n.length,i=n[0],u=[i,1];for(r=1;e>r;r++)i===n[r]?u[1]++:(t.push(u),i=n[r],u=[i,1]);return t.push(u),t}function y(n){var r,t,e,i,u,o=[],l=n.length;for(r=0;l>r;r++)if(u=n[r],1===u[1])o.push(u[0]);else for(e=u[1],i=u[0],t=0;e>t;t++)o.push(i);return o}function w(n){var r,t,e,i,u=n.length,o=new Array(u),l=Y.Math.ceil(en(u)),a=(1<<1+l)-1,f=new Array(a),c=1<<l;for(r=0;a>r;r++)f[r]=0;for(r=0;u>r;r++){for(i=n[r],e=c+i,t=0;l>t;t++)1&e&&(i-=f[e>>>1<<1]),f[e]+=1,e>>>=1;f[e]+=1,o[r]=i}return o}function b(n){var r,t,e,i,u,o,l,a,f,c=n.length,s=new Array(c);for(o=Y.Math.ceil(en(c)),l=(1<<1+o)-1,a=new Array(l),f=1<<o,r=0;o>=r;r++)for(t=1,e=1<<r;e>=t;t++)a[e-1+t]=1<<o-r;for(r=0;c>r;r++){for(i=n[r],u=1,t=0;o>t;t++)a[u]-=1,u<<=1,i>=a[u]&&(i-=a[u],u++);a[u]=0,s[r]=u-f}return s}function x(n,r,t){var e,i=n.length,u=null==r;if(i>1)for(u&&(r=new Array(i-1),t=0),e=i-1;e>=1;e--)r[t++]=[n[0],n[e]];else u&&(r=[]);return u?r:t}function M(n,r){var t,e,i,u,o=n.length,l=new Array(o),a=!0===r?1:0,f=new Array(o),c=0,s=0;for(t=0;o>t;t++)f[t]=0;for(i=new Array(o),u=0,e=c++,i[u++]=e,f[e]=1;o>c;){if(e=n[e],f[e])for(u>a&&(i.length=u,l[s++]=i),i=new Array(o),u=0;o>c&&f[e=c];)++c;f[e]||(i[u++]=e,f[e]=1)}return u>a&&(i.length=u,l[s++]=i),s<l.length&&(l.length=s),l}function I(n){var r,t,e=n.length,i=new Array(e),u=0,o=M(n,!0);for(r=0,t=o.length;t>r;r++)u=x(o[r],i,u);return u<i.length&&(i.length=u),i}function E(n,r){var t,e,i,u=n.length,o=new Array(r);for(t=0;r>t;t++)o[t]=t;for(t=0;u>t;t++)swap=e[t],i=o[e[0]],o[e[0]]=o[e[1]],o[e[1]]=i;return o}function O(n,r){var t,e,i=n.length,u=new Array(i);for(t=0;i>t;t++)for(u[t]=new Array(i),e=0;i>e;e++)u[t][e]=0;if(!0===r)for(t=0;i>t;t++)u[n[t]][t]=1;else for(t=0;i>t;t++)u[t][n[t]]=1;return u}function C(n,r){var t,e,i=n.length,u=new Array(i);if(!0===r)for(t=0;i>t;t++)for(e=0;i>e;e++)n[t][e]&&(u[e]=t);else for(t=0;i>t;t++)for(e=0;i>e;e++)n[t][e]&&(u[t]=e);return u}function R(n){var r,t=n.length,e=new Array(t);for(r=0;t>r;r++)e[n[r]]=r;return e}function S(n,r){if(r=r||n.length,r!==n.length)return!1;var t,e,i=new Array(r);for(t=0;r>t;t++)i[t]=0;for(t=0;r>t;t++){if(e=n[t],0>e||e>=r||0!==i[e])return!1;i[e]++}for(t=0;r>t;t++)if(1!==i[t])return!1;return!0}function T(n){var r,t,e,i=n,u=i.length,o=u?i[0]:[],l=o.length;for(t=1;u>t;t++)for(e=o.slice(),r=0;l>r;r++)o[r]=e[i[t][r]];return o}function k(n){var r,t,e,i,u,o,l=n,a=l.length,f=0;for(e=0;a>e;e++)f+=l[e].length;for(r=new Array(f),i=0,e=0;a>e;e++){for(u=l[e],o=u.length,t=0;o>t;t++)r[i+t]=i+u[t];i+=o}return r}function P(n){for(var r=n.length,t=0;r>t;t++)if(n[t]!==t)return!1;return!0}function L(n,r){r=r||1;var t,e=new Array(r+1);for(t=0;r>=t;t++)e[t]=n;return P(T(e))}function N(n){for(var r=n.length,t=0;r>t;t++)if(n[t]===t)return!1;return!0}function X(n,r,t){if(n){var e,i,u,o,l,a=r,f=n.slice();if(0>t){for(e=a-2;e>=0&&n[e]<=n[e+1];)e--;if(e>=0){for(i=a-1;i>e&&n[e]<=n[i];)i--;for(l=f[e],f[e]=f[i],f[i]=l,u=e+1,o=a-1;o>u;)l=f[u],f[u++]=f[o],f[o--]=l}else f=null}else{for(e=a-2;e>=0&&n[e]>=n[e+1];)e--;if(e>=0){for(i=a-1;i>e&&n[e]>=n[i];)i--;for(l=f[e],f[e]=f[i],f[i]=l,u=e+1,o=a-1;o>u;)l=f[u],f[u++]=f[o],f[o--]=l}else f=null}return f}return null}function q(n,r,t,e){if(n){var i,u,o,l,a=r[1],f=r[0],c=e?0:1,s=n.slice();if(0>t){for(i=a-1,u=-1;i>0;){if(s[i]>s[i-1]+c){u=i;break}i--}if(-1===u&&0<s[0]&&(u=0),u>-1){for(l=f-1+c,i=a-1;i>u;i--)l-=c,s[i]=l;s[u]--}else s=null}else{if(i=a-1,u=-1,e)for(;i>=0;){if(s[i]<f-1){u=i;break}i--}else for(o=f-a;i>=0;){if(s[i]<o+i){u=i;break}i--}if(u>-1)for(l=s[u]+1-c,i=u;a>i;i++)l+=c,s[i]=l;else s=null}return s}return null}function j(n,r,t){if(n){var e,i,u=n.slice(),o=r,l=o.length;if(0>t){for(e=l-1;e>=0&&u[e]-1<0;)e--;if(e>=0)for(u[e]--,i=e+1;l>i;i++)u[i]=o[i]-1;else u=null}else{for(e=l-1;e>=0&&u[e]+1===o[e];)e--;if(e>=0)for(u[e]++,i=e+1;l>i;i++)u[i]=0;else u=null}return u}return null}function J(n,r,t){if(n){var e,i,u=n.slice(),o=r[0],l=r[1];if(0>t){for(e=o-1;e>=0&&u[e]-1<0;)e--;if(e>=0)for(u[e]--,l--,i=e+1;o>i;i++)u[i]=l;else u=null}else{for(e=o-1;e>=0&&u[e]+1===l;)e--;if(e>=0)for(u[e]++,i=e+1;o>i;i++)u[i]=0;else u=null}return u}return null}function V(n,r,t){if(n){var e,i,u,o,l,a,f=r,c=n.slice();if(0>t)if(c[0]>1){for(i=c.length,e=i-1;e>=0&&1===c[e];)e--;for(u=c[e]-1,c=c.slice(0,e+1),c[e]=u,l=0,e=0,i=c.length;i>e;e++)l+=c[e];for(a=f-l;a>0;)o=a,o>u?(o=u,c.push(o)):c.push(a),a-=o}else c=null;else if(c[0]<f){for(i=c.length,e=i-1,e>0&&e--;e>0&&c[e]===c[e-1];)e--;for(c[e]++,c=c.slice(0,e+1),l=0,e=0,i=c.length;i>e;e++)l+=c[e];for(a=f-l;a>0;)c.push(1),a--}else c=null;return c}return null}var D,G,H,F,$,B,U,Y={VERSION:"0.5.0"},z="prototype",K="constructor",Q=Array.prototype.slice,W=Object[z].hasOwnProperty,Z=Object[z].toString,nn=/^\s+|\s+$/g,rn=(String.prototype.trim?function(n){return n.trim()}:function(n){return n.replace(nn,"")},function(n){return n instanceof Array||"[object Array]"===Z.call(n)}),tn=function(n){return n instanceof String||"[object String]"===Z.call(n)},en=Math.log2||function(n){return Math.log(n)/Math.LN2},un=function(n){var r=n.toString(2),t=32-r.length;return t>0?new Array(t+1).join("0")+r:r},on=Object.create,ln=function(n,r){for(var t in r)W.call(r,t)&&(n[t]=r[t]);return n},an=function(n,r){1===arguments.length&&(r=n,n=Object);var t=r[K];return W.call(r,"__static__")&&(t=ln(t,r.__static__),delete r.__static__),t[z]=ln(on(n[z]),r),t},fn=1,cn=2,sn=4,_n=8,dn=16,hn=32,mn=sn|_n|dn,vn=mn|hn|fn|cn;return s.fac={},s.sub={},s.nom={},_.tbl={},Y.ORDER={LEX:sn,LEXICOGRAPHIC:sn,REVLEX:sn|fn,ANTILEX:sn|fn,REVERSELEXICOGRAPHIC:sn|fn,ANTILEXICOGRAPHIC:sn|fn,REFLEX:sn|cn,REFLECTEDLEXICOGRAPHIC:sn|cn,COLEX:_n,COLEXICOGRAPHIC:_n,REVCOLEX:_n|fn,ANTICOLEX:_n|fn,REVERSECOLEXICOGRAPHIC:_n|fn,ANTICOLEXICOGRAPHIC:_n|fn,REFCOLEX:_n|cn,REFLECTEDCOLEXICOGRAPHIC:_n|cn,REV:fn,REVERSE:fn,REVERSED:fn,REF:cn,REFLECT:cn,REFLECTED:cn,RANDOM:hn},Y.Math={O:0,I:1,J:-1,N:function(n){return Y.Arithmetic.add(Y.Arithmetic.O,n)},V:function(n){return Y.Arithmetic.sub(Y.Arithmetic.O,n)},rnd:Math.random,rndInt:function(n,r){return Y.Math.round((r-n)*Y.Math.rnd()+n)},equ:function(n,r){return n===r},gte:function(n,r){return n>=r},lte:function(n,r){return r>=n},gt:function(n,r){return n>r},lt:function(n,r){return r>n},inside:function(n,r,t,e){return e?n>=r&&t>=n:n>r&&t>n},clamp:function(n,r,t){return r>n?r:n>t?t:n},wrap:function(n,r,t){return r>n?t:n>t?r:n},wrapR:function(n,r){return 0>n?n+r:n},add:function(n,r){return n+r},sub:function(n,r){return n-r},mul:function(n,r){return n*r},div:function(n,r){return Y.Math.floor(n/r)},mod:function(n,r){return n%r},pow:Math.pow,shl:function(n,r){return n<<r},shr:function(n,r){return n>>r},bor:function(n,r){return n|r},band:function(n,r){return n&r},xor:function(n,r){return n^r},abs:Math.abs,min:Math.min,max:Math.max,floor:Math.floor,ceil:Math.ceil,round:Math.round,num:function(n){return"number"==typeof n?Y.Math.floor(n):parseInt(n,10)},val:function(n){return Y.Math.floor(n.valueOf())}},Y.Arithmetic={O:0,I:1,J:-1,N:Y.Math.N,V:Y.Math.V,equ:Y.Math.equ,gte:Y.Math.gte,lte:Y.Math.lte,gt:Y.Math.gt,lt:Y.Math.lt,inside:Y.Math.inside,clamp:Y.Math.clamp,wrap:Y.Math.wrap,wrapR:Y.Math.wrapR,add:Y.Math.add,sub:Y.Math.sub,mul:Y.Math.mul,div:Y.Math.div,mod:Y.Math.mod,pow:Y.Math.pow,shl:Y.Math.shl,shr:Y.Math.shr,bor:Y.Math.bor,band:Y.Math.band,xor:Y.Math.xor,abs:Y.Math.abs,min:Y.Math.min,max:Y.Math.max,floor:Y.Math.floor,ceil:Y.Math.ceil,round:Y.Math.round,rnd:Y.Math.rndInt,num:Y.Math.num,val:Y.Math.val},Y.BitArray=an({constructor:function pn(n){var r=this;return r instanceof pn?(r.length=n,void(r.bits=new Uint32Array(Y.Math.ceil(n/32)))):new pn(n)},length:0,bits:null,dispose:function(){var n=this;return n.length=null,n.bits=null,n},clone:function(){var n=this,r=new Y.BitArray(n.length);return r.bits=new Uint32Array(n.bits),r},fromArray:function(n){var r=this;return r.bits=new Uint32Array(n),r},toArray:function(){return Q.call(this.bits)},toString:function(){var n,r,t=this.toArray();for(n=0,r=t.length;r>n;n++)t[n]=un(t[n]);return t.join("")},reset:function(){var n,r=this,t=r.bits,e=t.length;for(n=0;e>n;n++)t[n]=0;return r},isset:function(n){return!!(this.bits[n>>>5]&1<<(31&n))},set:function(n){var r=this;return r.bits[n>>>5]|=1<<(31&n),r},unset:function(n){var r=this;return r.bits[n>>>5]&=~(1<<(31&n)),r},toggle:function(n){var r=this;return r.bits[n>>>5]^=1<<(31&n),r}}),D=Y.CombinatorialIterator=an({constructor:function(n,r,t,e){var i=this,u=i[K];i.type=String(n),i.n=r||0,i.options=t||{},i._count=u.count(i.n,i.type),i.order(i.options.order||e||sn)},__static__:{Iterable:function gn(n){var r=this;return r instanceof gn?void(r.next=function(){return n.hasNext()?{value:n.next()}:{done:!0}}):new gn(n)},C:function(n,r){return e(n,r)},P:function(n,r){return i(n)},T:function(n,r){return u(n,r)},count:r,initial:r,rank:r,unrank:r,dual:function(n,r,t,e,i){if(null==n)return null;var u=this,o=u.C,l=u.P;u.T;return i=0|i,hn&i?cn&i?l(n,t):n:_n&i?cn&i?o(n,t):l(o(n,t),t):cn&i?l(n,t):n.slice()},succ:function(n,r,t,e,i,u,o){var l=this,a=Y.Arithmetic;return null==r?null:l.unrank(a.add(t,0>n?a.J:a.I),e,i,o)},rand:function(n,r,t){var e=this,i=Y.Arithmetic,u=null!=t?t:e.count(n,r);return e.unrank(i.rnd(i.O,i.sub(u,i.I)),n,r,u)}},type:null,options:null,n:0,_order:0,_count:0,__index:null,_index:null,__item:null,_item:null,_prev:null,_next:null,_traversed:null,dispose:function(){var n=this;return n.type=null,n.options=null,n.n=null,n._order=null,n._count=0,n.__index=null,n._index=null,n.__item=null,n._item=null,n._prev=null,n._next=null,n._traversed&&(n._traversed.dispose(),n._traversed=null),n},_store:function(){var n=this;return[n._order,n.__index,n._index,n.__item,n._item,n._prev,n._next,n.n]},_restore:function(n){var r=this;return n&&(r._order=n[0],r.__index=n[1],r._index=n[2],r.__item=n[3],r._item=n[4],r._prev=n[5],r._next=n[6],r.n=n[7]),r},total:function(){return this._count},order:function(n,r){if(!arguments.length)return this._order;var e,i,u,o,l,a,f=this,c=Y.Arithmetic,s=c.O,_=c.I,d=f[K];d.T;return r=!1===r,n=t(n),i=f._count,o=f.n,l=f.type,u=c.sub(i,_),a=fn&n?-1:1,a=r?-a:a,f._order=n,f.__index=f._index=s,f._item=f.__item=null,f._prev=!1,f._next=!1,hn&n?(c.gt(i,1e6)?(f._traversed&&(f._traversed.dispose(),f._traversed=null),e=f.randomIndex()):(f._traversed?f._traversed.reset():f._traversed=new Y.BitArray(i),f._traversed.set(e=f.randomIndex())),f.__item=d.unrank(e,o,l,i),null!=f.__item&&(f.__index=e)):_n&n?(f.__item=d.initial(-a,o,l,n),null!=f.__item&&(f.__index=-1===a?s:u)):(f.__item=d.initial(a,o,l,n),null!=f.__item&&(f.__index=-1===a?u:s)),f._item=null==f.__item?null:d.dual(f.__item,f.__index,o,l,n),f._index=!r||hn&n?s:u,f._prev=hn&n||!r?!1:null!=f.__item,f._next=!r||hn&n?null!=f.__item:!1,f},index:function(n){if(!arguments.length)return this._index;var r,t=this,e=Y.Arithmetic,i=e.O,u=e.I,o=e.J,l=t[K],a=(l.T,t.n),f=t.type,c=t._count,s=t._order,_=fn&s?-1:1;return n=e.wrapR(e.N(n),c),!e.equ(n,t._index)&&e.inside(n,o,c)&&(r=e.sub(c,u),_n&s?(t.__index=-1===_?n:e.sub(r,n),t._index=n,t.__item=e.equ(i,n)?l.initial(-_,a,f,s):e.equ(r,n)?l.initial(_,a,f,s):l.unrank(t.__index,a,f,c),t._item=l.dual(t.__item,t.__index,a,f,s),t._prev=null!=t.__item,t._next=null!=t.__item):hn&s||(t.__index=-1===_?e.sub(r,n):n,t._index=n,t.__item=e.equ(i,n)?l.initial(_,a,f,s):e.equ(r,n)?l.initial(-_,a,f,s):l.unrank(t.__index,a,f,c),t._item=l.dual(t.__item,t.__index,a,f,s),t._prev=null!=t.__item,t._next=null!=t.__item)),t},item:function(n,r){if(!arguments.length)return this._item;var e,i,u,o=this,l=o.n,a=o.type,f=o._count,c=o[K],s=(c.T,Y.Arithmetic),_=s.O,d=s.I,h=s.J;return r=null!=r?t(r):o._order,n=s.wrapR(s.N(n),f),r===o._order&&s.equ(n,o._index)?o._item:s.inside(n,h,f)?(i=fn&r?-1:1,e=s.sub(f,d),hn&r?(u=o.randomIndex(),c.dual(c.unrank(u,l,a,f),u,l,a,r)):_n&r?(u=-1===i?n:s.sub(e,n),c.dual(s.equ(_,n)?c.initial(-i,l,a,r):s.equ(e,n)?c.initial(i,l,a,r):c.unrank(u,l,a,f),u,l,a,r)):(u=-1===i?s.sub(e,n):n,c.dual(s.equ(_,n)?c.initial(i,l,a,r):s.equ(e,n)?c.initial(-i,l,a,r):c.unrank(u,l,a,f),u,l,a,r))):null},randomIndex:function(n,r){var t=this,e=Y.Arithmetic,i=e.N,u=e.O,o=e.I,l=t._count,a=arguments.length;return 0===a?(n=u,r=e.sub(l,o)):1===a?(n=i(n||0),r=e.sub(l,o)):(n=i(n),r=i(r)),e.rnd(n,r)},random:function(){var n=this,r=n[K];return r.dual(r.rand(n.n,n.type,n._count),null,n.n,n.type,hn|n._order)},rewind:function(){return this.order(this._order,!0)},next:function(){var n,r,t,e,i,u=this,o=Y.Arithmetic,l=o.O,a=o.I,f=o.J,c=u._order,s=u[K],_=(s.T,u._item),d=u.n,h=u.type,m=u._count;if(hn&c)if(e=o.sub(m,a),o.lt(u._index,e))if(n=u._traversed){for(r=u.randomIndex(),i=Y.Math.rnd()>.5?f:a;n.isset(r);)r=o.wrap(o.add(r,i),l,e);n.set(r),u.__item=s.unrank(r,d,h,m),null!=u.__item&&(u.__index=r)}else r=u.randomIndex(),u.__item=s.unrank(r,d,h,m),null!=u.__item&&(u.__index=r);else u._item=u.__item=null,u._traversed&&(u._traversed.dispose(),u._traversed=null);else t=fn&c?-1:1,_n&c?(u.__item=s.succ(-t,u.__item,u.__index,d,h,c,m),null!=u.__item&&(u.__index=o.add(u.__index,t>0?f:a))):(u.__item=s.succ(t,u.__item,u.__index,d,h,c,m),null!=u.__item&&(u.__index=o.add(u.__index,0>t?f:a)));return u._item=null==u.__item?null:s.dual(u.__item,u.__index,d,h,c),u._next=null!=u.__item,u._next&&(u._index=o.add(u._index,a)),_},hasNext:function(){return this._next},forward:function(){return this.order(this._order,!1)},prev:function(){var n,r=this,t=Y.Arithmetic,e=t.I,i=t.J,u=r._order,o=r[K],l=(o.T,r._item),a=r.n,f=r.type,c=r._count;return hn&u?null:(n=fn&u?-1:1,_n&u?(r.__item=o.succ(n,r.__item,r.__index,a,f,u,c),null!=r.__item&&(r.__index=t.add(r.__index,0>n?i:e))):(r.__item=o.succ(-n,r.__item,r.__index,a,f,u,c),null!=r.__item&&(r.__index=t.add(r.__index,n>0?i:e))),r._item=null==r.__item?null:o.dual(r.__item,r.__index,a,f,u),r._prev=null!=r.__item,r._prev&&(r._index=t.sub(r._index,e)),l)},hasPrev:function(){return hn&this._order?!1:this._prev},range:function(n,r){var t,e,i,u,o,l=this,a=Y.Arithmetic,f=a.N,c=a.O,s=a.I,_=l._count,d=1,h=arguments.length,m=a.sub(_,s),v=!(hn&l._order);if(1>h?(n=c,r=m):2>h?(n=f(n),r=m):(n=f(n),r=f(r)),n=a.wrapR(n,_),r=a.wrapR(r,_),a.gt(n,r)&&(t=n,n=r,r=t,d=-1),n=a.clamp(n,c,m),v&&(r=a.clamp(r,c,m)),a.lte(n,r)){if(o=l._store(),v&&l.index(n),i=a.val(a.sub(r,n)),e=new Array(i+1),0>d)for(u=i;u>=0;u--)e[u]=l.next();else for(u=0;i>=u;u++)e[u]=l.next();l._restore(o)}else e=[];return e},__iter__:function(){return new D.Iterable(this)}}),"undefined"!=typeof Symbol&&"undefined"!=typeof Symbol.iterator&&(D[z][Symbol.iterator]=D[z].__iter__),G=Y.Permutation=an(D,{constructor:function An(n){var r=this;return r instanceof An?void D.call(r,"permutation",n||1):new An(n)},__static__:{C:function(n,r){return e(n,-1)},P:D.P,T:D.T,count:function(n,r){return s(n)},initial:function(n,r,t,e){var i,u=new Array(r);if(0>n)for(r-=1,i=0;r>=i;i++)u[i]=r-i;else for(i=0;r>i;i++)u[i]=i;return u},dual:D.dual,succ:function(n,r,t,e,i,u){return X(r,e,n)},rand:function(n,r,t){var e,i;Y.Math.rndInt;for(i=new Array(n),e=0;n>e;e++)i[e]=e;return v(i,!1,!1),i},rank:function(n,r,t,e){var i,u,o,l=Y.Arithmetic;if(r=r||n.length,!r)return l.J;for(n=w(n),i=l.O,o=r-1,u=0;o>u;u++)i=l.add(l.mul(i,r-u),n[u]);return i},unrank:function(n,r,t,e){var i,u,o,l,a,f=Y.Arithmetic;if(!r)return[];for(i=new Array(r),i[r-1]=0,u=n,o=r-2;o>=0;o--)l=r-o,a=f.mod(u,l),u=f.div(u,l),i[o]=f.val(a);return b(i)},permute:function(n,r,t){var e,i,u,o=n.length;for(!0===t?(i=new Array(o),u=n):(i=n,u=n.slice()),e=0;o>e;e++)i[e]=u[r[e]];return i},shuffle:function(n,r){return v(n,!0===r,!1)},compose:function(){return T(arguments)},concatenate:function(){return k(arguments)},inverse:function(n){return R(n)},cycles:function(n,r){return-1===r?cycles2permutation(n):M(n)},swaps:function(n,r){return-1===r?E(n):I(n)},inversion:function(n,r){return-1===r?b(n):w(n)},matrix:function(n,r,t){return-1===t?C(n,r):O(n,r)},is_permutation:S,is_identity:P,is_derangement:N,is_involution:L}}),H=Y.Combination=an(D,{constructor:function yn(n,r,t){var e=this;return e instanceof yn?void D.call(e,String(t||"combination").toLowerCase(),[n||1,r||1]):new yn(n,r,t)},__static__:{C:function(n,r){return e(n,r[0])},P:D.P,T:D.T,count:function(n,r){return s("repeated"===r?n[0]+n[1]-1:n[0],n[1])},initial:function(n,r,t,e){var i,u="repeated"===t,o=r[1]-1,l=new Array(o+1);if(0>n)if(r=r[0]-1,u)for(i=0;o>=i;i++)l[i]=r;else for(i=0;o>=i;i++)l[o-i]=r-i;else if(u)for(i=0;o>=i;i++)l[i]=0;else for(i=0;o>=i;i++)l[i]=i;return l},dual:D.dual,succ:function(n,r,t,e,i,u){return q(r,e,n,"repeated"===i)},rand:function(n,r,t){var e,i,u,o,l=n[1],a=Y.Math.rndInt,f="repeated"===r;if(n=n[0],u=n-l,o=n-1,f)if(1===l)e=[a(0,o)];else{for(e=new Array(l),i=0;l>i;i++)e[i]=a(0,o);m(e)}else{var c,s,_;if(1===l)e=[a(0,o)];else if(n===l)for(e=new Array(l),i=0;l>i;i++)e[i]=i;else if(l>u){for(c={},_=new Array(u),i=0;u>i;i++){do s=a(0,o);while(1===c[s]);c[s]=1,_[i]=s}e=d(n,m(_))}else{for(c={},e=new Array(l),i=0;l>i;i++){do s=a(0,o);while(1===c[s]);c[s]=1,e[i]=s}m(e)}}return e},rank:function(n,r,t,e){var i,u,o,l,a,f=Y.Arithmetic,c=f.add,_=f.sub,d=f.O,h=r[1],m="repeated"===t;if(r=r[0],l=m?r+h-1:r,a=e?e:s(l,h),m)for(i=1;h>=i;i++)u=l-1-n[i-1]-i+1,o=h+1-i,u>=o&&(d=c(d,s(u,o)));else for(i=1;h>=i;i++)u=l-1-n[i-1],o=h+1-i,u>=o&&(d=c(d,s(u,o)));return _(_(a,f.I),d)},unrank:function(n,r,t,e){var i,u,o,l,a,f,c=Y.Arithmetic,_=c.O,d=c.I,h=r[1],m="repeated"===t;r=r[0],o=m?r+h-1:r,e=null!=e?e:s(o,h),i=new Array(h),u=e,n=c.sub(c.sub(u,d),n),u=c.div(c.mul(u,o-h),o),a=o-h+1,l=h,f=o-1;do c.lte(u,n)?(i[h-l]=m?o-a-h+1:o-a-l+1,c.gt(u,_)&&(n=c.sub(n,u),u=c.div(c.mul(u,l),f)),l--,f--):(u=c.div(c.mul(u,f-l),f),a--,f--);while(l>0);return i},complement:function(n,r){return d(r,n)},pick:function(n,r,t,e){return p(n,r,!1===t,!0===e,!0)},choose:function(n,r){var t,e=r.length,i=new Array(e);for(t=0;e>t;t++)i[t]=n[r[t]];return i}}}),H.conjugate=H.complement,$=Y.Powerset=Y.Subset=an(D,{constructor:function wn(n){var r=this;return r instanceof wn?void D.call(r,"subset",n||1):new wn(n)},__static__:{C:function(n,r){return d(r,n)},P:D.P,T:D.T,count:function(n){return f(n)},initial:function(n,r,t,e){var i,u;if(0>n)for(i=new Array(r),u=0;r>u;u++)i[u]=u;else i=[];return i},dual:function(n,r,t,e,i){if(null==n)return null;var u=this,o=u.C,l=u.P;u.T;return i=0|i,hn&i?cn&i?n:l(n,t):_n&i?cn&i?l(o(n,t),t):o(n,t):cn&i?n.slice():l(n,t)},succ:D.succ,rand:D.rand,rank:function(n,r,t,e){for(var i=Y.Arithmetic,u=i.O,o=i.I,l=u,a=0,f=subset.length;f>a;)l=i.add(l,i.shl(o,subset[a++]));return l},unrank:function(n,r,t,e){var i=this,u=Y.Arithmetic,o=u.O,l=[],a=0;if(!u.inside(n,u.J,null!=e?e:i.count(r)))return null;for(;u.gt(n,o);)u.gt(u.band(n,1),o)&&l.push(a),u.gt(u.band(n,2),o)&&l.push(a+1),u.gt(u.band(n,4),o)&&l.push(a+2),u.gt(u.band(n,8),o)&&l.push(a+3),u.gt(u.band(n,16),o)&&l.push(a+4),u.gt(u.band(n,32),o)&&l.push(a+5),u.gt(u.band(n,64),o)&&l.push(a+6),u.gt(u.band(n,128),o)&&l.push(a+7),a+=8,n=u.shr(n,8);return l}}}),F=Y.Partition=an(D,{constructor:function bn(n){var r=this;return r instanceof bn?void D.call(r,"partition",n||1):new bn(n)},__static__:{C:function(n,r){return g(n)},P:D.P,T:D.T,count:function(n,r){var t,e,i=Y.Arithmetic.add,u=Y.Arithmetic.N(n>1?2:1);for(t=2;n>t;t++)for(e=n-t+1;e>=1;e--)u=i(u,_(n,t,e));return u},initial:function(n,r,t,e){var i,u;if(0>n)u=[r];else for(u=new Array(r),i=0;r>i;i++)u[i]=1;return u},dual:function(n,r,t,e,i){return null==n?null:n.slice()},succ:function(n,r,t,e,i,u){return V(r,e,n)},rand:function(n,r,t){return null},rank:function(n,r,t,e){return Y.Arithmetic.J},unrank:function(n,r,t,e){return null},conjugate:g,pack:A,unpack:y}}),F.transpose=F.conjugate,B=Y.Tensor=an(D,{constructor:function xn(){var n=this,r=arguments;return n instanceof xn?void(r.length?D.call(n,"tensor",r[0]instanceof Array?r[0]:Q.call(r)):(n.n=[],n._count=0)):(n=new xn,r.length?D.call(n,"tensor",r[0]instanceof Array?r[0]:Q.call(r)):(n.n=[],n._count=0),n)},__static__:{C:D.C,P:D.P,T:D.T,count:function(n){return n&&n.length?a(n):0},initial:function(n,r,t,e){var i,u=r.length,o=new Array(u);if(0>n)for(i=0;u>i;i++)o[i]=r[i]-1;else for(i=0;u>i;i++)o[i]=0;return o},dual:D.dual,succ:function(n,r,t,e,i,u){return j(r,e,n)},rand:function(n,r,t){var e,i=Y.Math.rndInt,u=n.length,o=new Array(u);for(e=0;u>e;e++)o[e]=i(0,n[e]-1);return o},rank:function(n,r,t,e){var i,u,o=Y.Arithmetic,l=r.length;if(!l)return o.J;for(i=o.O,u=0;l>u;u++)i=o.add(o.mul(i,r[u]),n[u]);return i},unrank:function(n,r,t,e){var i,u,o,l,a,f=Y.Arithmetic,c=r.length;if(!c)return[];for(a=new Array(c),i=n,o=c-1;o>=0;o--)u=r[o],l=f.mod(i,u),i=f.div(i,u),a[o]=f.val(l);return a},product:l,component:function(n,r){var t,e,i,u,o,l,a=[],f=r,c=f.length;for(t=0;c>t;t++)if(i=f[t],o=n[t],u=i[o],u instanceof Array)for(e=0,l=u.length;l>e;e++)a.push(u[e]);else a.push(u);return a}}}),U=Y.Tuple=an(D,{constructor:function Mn(n,r){var t=this;return t instanceof Mn?void D.call(t,"tuple",[n||1,r||2]):new Mn(n,r)},__static__:{C:function(n,r){return e(n,r[1])},P:D.P,T:D.T,count:function(n){return c(n[0],n[1])},initial:function(n,r,t,e){var i,u=r[0],o=new Array(u);if(0>n)for(r=r[1]-1,i=0;u>i;i++)o[i]=r;else for(i=0;u>i;i++)o[i]=0;return o},dual:D.dual,succ:function(n,r,t,e,i,u){return J(r,e,n)},rand:function(n,r,t){var e,i=Y.Math.rndInt,u=n[0],o=n[1]-1,l=new Array(u);for(e=0;u>e;e++)l[e]=i(0,o);return l},rank:function(n,r,t,e){var i,u,o=Y.Arithmetic,l=r[0],a=r[1];for(i=o.O,u=0;l>u;u++)i=o.add(o.mul(i,a),n[u]);return i},unrank:function(n,r,t,e){var i,u,o,l,a=Y.Arithmetic,f=r[1],c=r[0];for(l=new Array(c),i=n,u=c-1;u>=0;u--)o=a.mod(i,f),i=a.div(i,f),l[u]=a.val(o);return l}}}),Y});